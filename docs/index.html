<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Diamond Engine</title>
    
    <link rel="icon" href="media/DiamondIcon.ico"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="main.css">

</head>

<body style="margin: 0;">
    
    <!--
    <div class="topnav">
      <a class="active" href="#home">Home</a>
      <a href="#news">News</a>
      <a href="#contact">Contact</a>
      <a href="#about">About</a>
    </div>
    -->
    <!-- <div>
        Could be a cool idea to make the "Download" button get a direct download link and not a link to the last release
    </div> -->

    <!-- <div style="position: fixed; width: 100%; background-color: #2195f3d0; z-index: 1; ">
        Hola
    </div> -->


    <div style="position: relative; height: 80%;">
        <img src="media/S2Diff.png" alt="background" style="
        position: absolute;
        width: 100%;
        height: 100%;
        object-fit: cover;
        background-position: center;">
            
        <div class="vertical-center">
            <h1 style="font-weight: bold; font-size: calc(3vh + 3vw); color: white; margin-bottom: 0 !important; 
            margin-top: 0 !important; text-shadow: 2px 2px 4px #000000;
            white-space: nowrap;">
            Diamond Engine
            </h1>

            <p style="margin-top: 0; font-size: calc(1vh + 1vw); color: white; text-shadow: 1.5px 1.5px 4px #000000;">C++/C# Game Engine</p>
            <div style="margin-bottom: calc(1.5vh + 1.5vw) !important;"></div>
        
            <button class="cool-button" onclick="window.open('https://github.com/MayKoder/Diamond-Engine/releases/latest', '_blank')">Download Engine</button>
            <button class="cool-button" onclick="window.open('https://github.com/MayKoder/Diamond-Engine','_blank')">View GitHub</button>
        </div>
    </div>

<br><br>

    <div class="container" style="text-align: center;">
        <h3>All about Diamond Engine</h3>
        <p>
            Diamond Engine is a lightweight 3D (and future 2D) game development engine. This engine was developed 
            as part of a college assignment. The engine supports almost every editor feature that you could expect 
            from a game development engine, but the most relevant feature is the added support to interpret and work 
            with C# code on a component-based GameObject system.
        </p>
        <p>
            The C# implementation was mainly focused on making it as fast and reliable as possible. This implementation uses the 
            mono runtime working with JIT to execute C# code at runtime. With this implementation and the app-domain 
            system, it is also possible to recompile code at runtime to make the iteration time as fast as possible.
        </p>
        <p>
            Apart from the performance and reliable dynamic memory management, the engine is also focused on being 
            visually attractive to the users. Also, new features are being added to make the engine able to generate 
            bigger and better games.
        </p>
    </div>

    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <hr>
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->

    <div class="container">
        <div class="hrList">
            <img class="hrList__image" style='vertical-align:middle; width: 30%;' src='media/PF1.jpeg'>
            <div class="hrList__text">
              <h3 style="font-weight: bold; margin-top: 0;">About me</h3>
              <p>
                  Hi, I'm Mayk. I'm the only developer involved in the "Diamond Engine" project and I've been working 
                  on it since early 2020.
                </p>
              <p>
                  I've been coding and making "games" since I was 14 and when I saw a chance to start developing my 
                  engine I tried my best to do something I could be proud of. My first contact with the Game Development 
                  word was thanks to the Unity Engine, and I always wanted to know how it was made.
              </p>
              <p>
                  Working on Diamond Engine was and still is, the better way for me to learn new things, and I enjoy 3D 
                  math and coding so it was perfect. I think this engine reflects what I'm capable of as in 2020, and I 
                  plan to get better.
              </p>
              <p>
                  Here's my LinkedIn page if you are interested in some of my other work.
                </p>
              <a href="https://www.linkedin.com/mwlite/in/miquel-suau-gonzalez" target="_blank">
                <img alt="linkedin-image" src="media/linkedin.png" width="50px">
                </a>
              <p>All my other projects can be found in my GitHub page or in this portfolio display.</p>
              <a href="https://maykoder.github.io/maykoder/projects.html" target="_blank">
                <img alt="portfolio-image" src="media/DiamondIcon.ico" width="50px">
                </a>
              
            </div>
        </div>


        <!-- <img style='vertical-align:middle; width: 30%;' src='media/PF1.jpg'>
        <div style='vertical-align:top; display:inline;'>
        Hi, I'm Mayk. I'm the only developer involved on the "Diamond Engine" project, and i've been working on it since early 2020. (explain here all about you and the project maybe?)
        </div> -->
    </div>

    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <hr>
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->

    <div class="container" style="text-align: center;">
        <h3>Core Sub-Systems</h3>

        <ul style="display: grid; list-style-type:disc;">
            <li>
                <h4>Optimized 3D rendering</h4>
                <p>
                    OpenGL rendering was optimized avoiding deprecated methods and systems, and its 
                    performance was also improved by rendering as much as possible with retained mode.
                </p>
                <p>
                    Texture transparency has been added too, and models are rendered front to back to 
                    allow transparency to work as expected.
                </p>
            </li>
            <li>
                <h4>Camera Culling</h4>
                <p>
                    Scene rendering time was reduced with camera culling, camera frustum, and AABB boxes 
                    to discard all the meshes outside the camera view. A future improvement will be made 
                    by adding space partitioning
                    <a href="https://maykoder.github.io/Space-Partitioning/">
                        (a field I made a small study of back in 2018 that can be found here).
                    </a>
                </p>
            </li>
            <li>
                <h4>Editor Docking</h4>
                <p>
                    Thanks to ImGui's docking, adding docking was fast and cool. Windows can be docked and 
                    moved around the editor and can even be moved outside the main viewport.
                </p>
            </li>
            <li>
                <h4>Script Creation</h4>
                <p>
                    Right-click inside the Assets window to use the script creation popup. With this popup, you can create scripts 
                    that will be added to the .sln file and will be created with template code and an Update() method.
                </p>
                <p>
                    These new scripts will be added to the C# Visual Studio solution and can be directly edited with 
                    no restart needed.
                </p>
            </li>
            <li>
                <h4>Script editor</h4>
                <p>
                    A script editor was added to allow fast script modification, but I recommend using Visual Studio
                     2019.
                </p>
                <p>
                    MSBuild was added as a portable exec to allow everyone to use the engine without any kind of installation 
                    nor external software, and also to avoid problems with the C# compilation. (Missing dotnet or MSBuild paths).
                </p>
                <h5>
                    Important note: The build 3.0 requires the .NET desktop development pack to work, if it's 
                    not installed, the engine will crash. An assertion has been added in new versions to alert 
                    the new users.
                </h5>
            </li>
            <li>
                <h4>GameObject & Component System</h4>
                <p>
                    The engine works with a GameObject and component system which means that each entity is known 
                    as a GameObject and this object contains components, each component derives from the same 
                    class but has different functionality.
                </p>
            </li>
            <li>
                <h4>Multi-viewport Rendering</h4>
                <p>
                    Giving each camera component its buffers allowed me to create multi-camera rendering, which means 
                    that more than one camera can be rendered at once in different windows.
                </p>
            </li>
            <li>
                <h4>Memory management</h4>
                <p>
                    Memory has been closely monitored to avoid leaks and unnecessary usage increments. The use of containers 
                    was selected with performance and memory in mind, and I can proudly say that there are, at least not 
                    detected, any memory leaks.
                </p>
                <p>
                    Also, memory usage is kept flat and straight during the majority of the engine usage time and it only changes 
                    when loading scenes and assets as nen memory are temporally allocated, but at the end, all memory is deleted. 
                </p>
                <p>
                    Even some tests have been made while creating ≈ 2000 objects and deleting them 5 seconds later, and the memory 
                    usage is kept almost the same, when all created objects are deleted, memory usage is the same as before spawning 
                    anything.
                </p>
            </li>
            <li>
                <h4>Time management</h4>
                <p>
                    The time management system makes it possible to start/stop/pause/step a simulation that will 
                    also run other systems (Like shaders, particles...). The content played during this simulation 
                    will be the exact content played/displayed when the game is compiled and executed as a 
                    standalone application.
                </p>
            </li>
            <li>
                <h4>Resource Manager</h4>
                <p>
                    Resource management systems make sure that we don't use more memory than we need by only loading resources once to 
                    memory, and then the system will assign references (pointers) to those loaded resources. This system drastically reduces 
                    the usage of and the game.
                </p>
            </li>
            <li>
                <h4>Editor camera movement</h4>
                <p>
                    Editor camera movement options are smooth, and there's a lot to choose from, Fps, orbital camera, 
                    panning, zoom... All those types of movement have been made from scratch because I like 3D math and 
                    it was a cool moment to dust off my quaternions old notes.
                </p>
            </li>
            <li>
                <h4>Style Customization</h4>
                <p>
                    The user can create, edit, and save their editor styles, custom colors, and shapes to go with every different 
                    work style. The dark theme is the default, but themes can be created and share because they are saved in a JSON file.
                </p>
            </li>
            <li>
                <h4>Screenshot System</h4>
                <p>
                    A small screenshot system was added to the editor that allows the user to capture simulation 
                    moments or editor frames as .PNG files.
                </p>
            </li>
          </ul>

          <p>
            There are more sub-systems to talk about, but those are the most relevant ones.
          </p>
    </div>

    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <hr>
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->

    <div class="container" style="text-align: center;">

        <h3>C# Sub-System</h3>

            <p></p>
            <p>
                As mentioned above, Diamond Engine has a C#/Mono implementation, making it perfect for faster 
                code iterations.
            </p>
            <p>
                This implementation makes heavy use of extern methods to send and receive data from C++ and C#, 
                which are connected.
            </p>
            <p>
                One of the biggest performance optimizations was achieved by sending C++ pointers to the C# objects 
                as UINT64 values, and then, when we need to retrieve some data from C++ to use on C#, we just have 
                to send and cast that pointer UINT64 to C++ and then send the data that we need to C#.
            </p>
            <p>
                As trivial as this may sound, this small detail reduced considerably the C++/C# communication 
                time, which also made Update times a lot faster.
            </p>

            <p>
                A simple exception handling system was also added. The display fields are saved and serialized and 
                will auto-fill on scene loading. Mono also generates 0 memory leaks and creates almost no increment 
                on memory usage, even when spawning new objects.
            </p>

            <p>
                Scripts created via the Assets window will be automatically added to the Visual Studio solution. This also 
                allows the user to iterate faster with the hot-reloading system.
            </p>

            <p>
                On the left gif we can see a script being modified via Visual Studio and how it hot-reloads when we 
                focus back on the engine. Also how the variables are changed in the inspector.
            </p>

            <p>
                Also, on the right gif we can see a script being created from the engine and how it hot-reloads to add 
                itself to the solution. We can also see the simulation in action.
            </p>

            <div style="text-align: center;">
                <img style='vertical-align:middle; width: 40%; border-radius: 7%;' src='media/GifHolder1.webp'>
                <img style='vertical-align:middle; width: 40%; border-radius: 7%;' src='media/GifHolder2.gif'>
            </div>

    </div>

    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <hr>
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <div class="container">
        <h3>Workflow video</h3>
        <video width="100%" height="100%" controls>
            <source src="media/AttackRender.mp4" type="video/mp4">
            <!-- <source src="movie.ogg" type="video/ogg"> -->
          Your browser does not support the video tag.
          </video>
    </div>

    <div class="spacer"></div> <!-- ---------- SPACER --------- -->
    <hr>
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->

    <div class="container" style="text-align:center;">
        <h3>Licence</h3>
        <p>AGPL-3.0 License</p>
        <p>
            Diamond Engine, lightweight 3D game engine software. <br>Copyright (C) 2020  Miquel 
            Suau Gonzalez.
        </p>
        <p>
            This program is free software: you can redistribute it and/or modify
            it under the terms of the GNU Affero General Public License as published
            by the Free Software Foundation, either version 3 of the License, or
            (at your option) any later version.
        </p>

        <p>
            This program is distributed in the hope that it will be useful,
            but WITHOUT ANY WARRANTY; without even the implied warranty of
            MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
            GNU Affero General Public License for more details.

        </p>

        <p style="font-weight: bold;">
            You should have received a copy of the GNU Affero General Public License
            along with this program.  If not, see 
            <a target="_blank" href="https://github.com/MayKoder/Diamond-Engine/blob/master/LICENSE">
                https://github.com/MayKoder/Diamond-Engine/blob/master/LICENSE.
            </a>
        </p>

        <div class="spacer"></div> <!-- ---------- SPACER --------- -->
        <p>
            <h5>
                Contact:
            </h5>
            <ul style="display: grid; list-style-type:disc;">
                <li>
                    Contact at GitHub: 
                    <a target="_blank" href="https://github.com/MayKoder">
                        https://github.com/MayKoder
                    </a>
                </li>
                <li>
                    Contact at LinkedIn: 
                    <a target="_blank" href="https://www.linkedin.com/mwlite/in/miquel-suau-gonzalez">
                        https://www.linkedin.com/mwlite/in/miquel-suau-gonzalez
                    </a>
                </li>
                <li>
                    Contact at Gmail: 
                    <a>
                        sg.miquel@gmail.com
                    </a>
                </li>
            </ul>
        </p>

    </div>
    <!-- <h2 style="position: absolute; color: white;">Diamond Engine</h2> -->
    <div class="spacer"></div> <!-- ---------- SPACER --------- -->

    <div style="width: 100%; background-color: black; text-align: center; padding-bottom: 2vh; padding-top: 2vh;">
        <p style="color:white;">Page designed and created with HTML, CSS and JS by Miquel Suau Gonzàlez</p>
        <div style="color:white;">
            ©2020 Miquel Suau Gonzàlez <a href="https://github.com/MayKoder" target="_blank">(@MayKoder)</a>
            <br>
            All Rights Reserved.
        </div>

    </div>
</body>
    
</html>
